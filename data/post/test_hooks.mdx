---
title: custom hooks test í•´ë³´ê¸°
publishedAt: 2022-10-12
description: hooks í…ŒìŠ¤íŠ¸ í–ˆë‹¤. ê·¸ë¦¬ê³  hookì„ ê³ ì¹˜ê²Œ ë˜ì—ˆë‹¤.
thumbnailImg: https://velog.velcdn.com/images/otterp/post/b7338d83-62ca-430a-bb37-54bb324e6178/image.png
isFeatured: false
tags:
  - test
  - jest
---

ì–¼ë§ˆì „ë¶€í„° í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ìˆëŠ”ë° ê·¸ ì´ìœ  ì¤‘ í•˜ë‚˜ëŠ” ì»¤ìŠ¤í…€í›…ì„ í…ŒìŠ¤íŠ¸í•´ë³´ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì—ì„œ ì‹œì‘ë˜ì—ˆë‹¤. ì–¼ë§ˆì „ ì¹œêµ¬ë‘ ë†€ë‹¤ê°€, ì»¤ìŠ¤í…€í›…ì„ ì¬ì‚¬ìš©í• ë•Œ í…ŒìŠ¤íŠ¸ê°€ ì´ë¯¸ ë˜ì–´ì ¸ ìˆë‹¤ë©´ ë” ì‹ ë¢°ì„±ìˆê²Œ ê°€ì ¸ë‹¤ ì“¸ ìˆ˜ ìˆì„ ê±°ë¼ëŠ” ì¹œêµ¬ì˜ ë§ì´ ë‡Œë¦¬ì— ë°•í˜€ì ¸ ìˆì—ˆê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ëŸ´ë“¯ í•œë°..? ì •ë„ê°€ ì•„ë‹ˆê³  ë„ˆë¬´ ë§ëŠ” ë§ì´ì—ˆë‹¤.

## í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸°

ëŒ€ë¶€ë¶„ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ëŠ” ë°©ë²•ì€, ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í–ˆì„ë•Œì™€ ë‹¤ë¥´ì§€ ì•Šì•˜ë‹¤. ë‹¤ë§Œ ë‘ê°€ì§€ ì‹ ê²½ ì“¸ì ì´ ìˆì—ˆëŠ”ë°, ë‹¤ìŒê³¼ ê°™ë‹¤.

1. `renderHook` ì„ í†µí•´ì„œ hookì„ ë Œë”í•´ì£¼ì.
   ì´ëŠ” ë§ˆì¹˜, ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ì—ì„œ `render`ì„ ì“°ëŠ” ê²ƒê³¼ ê°™ë‹¤.

2. `act` ë¥¼ ì‚¬ìš©í•˜ì.
   ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ì—ì„œëŠ” ì¢…ì¢…, `act`ë¥¼ ì“°ë©´ ì´ê±° ì“¸ í•„ìš”ì—†ëŠ”ë°? ë¼ëŠ” ë¬¸êµ¬ê°€ ì¶œë ¥ë˜ì—ˆì§€ë§Œ ëŒ€ë¶€ë¶„ `react`ì˜ ìƒíƒœë¥¼ ë³€í™”ì‹œí‚¤ëŠ” `custom hooks`ì—ì„œëŠ” `act`ë¥¼ ì•ˆì“°ë©´ ì•ˆëœë‹¤ë¼ê³  ì¶œë ¥ëœë‹¤.

## useToggle

ì‰¬ìš´ ê±° ë¶€í„° ì‹œì‘í–ˆë‹¤.

```jsx
import { useState } from "react";

const useToggle = (initialState: boolean) => {
  const [state, setState] = useState(initialState);

  const onToggleHandler = () => {
    setState(!state);
  };

  return {
    state,
    onToggleHandler,
  };
};

export default useToggle;
```

`useToggle`ì€ ê°„ë‹¨í•œ ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ, ì´ˆê¸° ìƒíƒœë¥¼ `t/f` ë¡œ ë°›ëŠ”ë‹¤.
ê·¸ë¦¬ê³ , `toggleHandler` ê°€ ë™ì‘í•˜ë©´ ìƒíƒœë¥¼ `!prev` ë¡œ ë³€í™”ì‹œí‚¨ë‹¤.
ë‚˜ëŠ”, ì´ ì»¤ìŠ¤í…€í›…ì„ ë©”ë‰´ë¥¼ ì—´ê³  ë‹«ì„ ë•Œ ì‚¬ìš©í•˜ê³  ìˆì—ˆë‹¤.

### ëŒ€ì¶© ìŠ¤í† ë¦¬ ì¨ë³´ê¸°.

ìœ„ì˜ ì»¤ìŠ¤í…€í›…ì„ í…ŒìŠ¤íŠ¸í•˜ë ¤ëŠ” ìŠ¤í† ë¦¬ë¥¼ ì¨ë³´ì.

1. `useToggle`ì€ ì´ˆê¸° ìƒíƒœë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ëŠ”ë‹¤.
   ê·¸ë¦¬ê³ , ì´ ë§¤ê°œë³€ìˆ˜ê°€ ì´ˆê¸°ì˜ ìƒíƒœê°’ì´ ëœë‹¤.
2. ìƒíƒœì™€ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë¥¼ ë¦¬í„´í•œë‹¤.
3. í•¸ë“¤ëŸ¬ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë©´, ìƒíƒœê°€ ë°˜ëŒ€ ë˜ëŠ” ìƒíƒœë¡œ ë°”ë€ë‹¤.

### ì½”ë“œ ì‘ì„±í•´ë³´ê¸°

```tsx
import { renderHook } from "@testing-library/react";
import useToggle from "hooks/useToggle";
import { act } from "react-dom/test-utils";

const mockInitialState = false;

describe("useToggle", () => {
  it("ë§¤ê°œë³€ìˆ˜ë¡œ ë“¤ì–´ê°„ initial stateë¥¼ ì´ˆê¸°ê°’ìœ¼ë¡œ ê°€ì§„ë‹¤.", () => {
    const { result } = renderHook(() => useToggle(mockInitialState));

    const { state } = result.current;

    expect(state).toBe(mockInitialState);
  });

  it("onToggleHandler í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤.", () => {
    const { result } = renderHook(() => useToggle(mockInitialState));
    const { onToggleHandler } = result.current;

    expect(onToggleHandler).toBeInstanceOf(Function);
  });

  it("onToggleHandlerê°€ ì‹¤í–‰ë˜ë©´, ìƒíƒœì˜ booleanì´ ë°˜ëŒ€ë¡œ ë°”ë€ë‹¤.", () => {
    const { result } = renderHook(() => useToggle(mockInitialState));
    // When testing, code that causes React state updates should be wrapped into act(...):

    act(() => {
      result.current.onToggleHandler();
    });

    expect(result.current.state).toBe(true);

    act(() => {
      result.current.onToggleHandler();
    });

    expect(result.current.state).toBe(false);
  });
});
```

ìƒê°ë³´ë‹¤ ì§ê´€ì ì´ê³  ê´œì°®ì•˜ëŠ”ë°, í•œê°€ì§€ ì•„ì‰¬ìš´ ì ì€ `setUp` í•˜ëŠ” ë¶€ë¶„ì„ ë„ˆë¬´ ì¤‘ë³µì ìœ¼ë¡œ ì ì–´ì£¼ê³  ìˆëŠ” ê²ƒ ê°™ìœ¼ë¯€ë¡œ í•¨ìˆ˜ í•˜ë‚˜ë¡œ ëº„ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.

```tsx
const setUp = () => {
  const { result } = renderHook(() => useToggle(mockInitialState));
  return result;
};

// ì´ë ‡ê²Œ ê°„ë‹¨íˆ ë§Œë“¤ì–´ì£¼ê³ , ì´ë¥¼ ë¦¬í„´ë°›ì•„ ì‚¬ìš©í–ˆë‹¤.
```

## useInput

ê·¸ëŸ¬ë©´, ì¡°ê¸ˆ ë” ë³µì¡í•œ ì»¤ìŠ¤í…€ í›…ì„ í•´ë³´ì.

```tsx
import { useState, useRef, useLayoutEffect } from "react";

const UseInput = (inputValidator: (value: string) => boolean) => {
  const [searchValue, setSearchValue] = useState("");
  const [isValid, setIsValid] = useState(false);
  const [isFocus, setIsFocus] = useState(false);
  const inputRef = useRef<HTMLInputElement>(null);

  const onChangeHandler = (e: React.ChangeEvent) => {
    if (!(e.target instanceof HTMLInputElement)) return;
    if (!inputRef.current) return;

    const currentValue = e.target.value;
    setSearchValue(currentValue);

    if (inputValidator(currentValue)) {
      setIsValid(true);
    } else setIsValid(false);
  };

  useLayoutEffect(() => {
    if (!inputRef.current) return;
    inputRef.current.focus();
  }, []);

  const onBlurHandler = () => setIsFocus(false);
  const onFocusHandler = () => setIsFocus(true);

  return {
    onChangeHandler,
    onFocusHandler,
    onBlurHandler,
    inputRef,
    isValid,
    isFocus,
    searchValue,
  };
};

export default UseInput;
```

ë‚´ê°€ ë§Œë“ , `useInput` ì»¤ìŠ¤í…€ í›…ì´ì—ˆë‹¤. `fo, blur` ê°™ì€ ë¶€ë¶„ë„ ê°™ì´ í¬í•¨í•˜ê³ ì ë§Œë“¤ì—ˆë‹¤. ì´ ë¶€ë¶„ ë•Œë¬¸ì— `ref` ë¥¼ ì‚¬ìš©í•œ ë¶€ë¶„ë„ ìˆë‹¤. ê·¸ëŸ°ë°, ì´ ì»¤ìŠ¤í…€ í›…ì„ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ê²Œ í˜ë“¤ì—ˆë‹¤. ì¡°ê¸ˆì¡°ê¸ˆ ë¬¸ì œê°€ ìˆì—ˆë‹¤.

![](https://velog.velcdn.com/images/otterp/post/b7338d83-62ca-430a-bb37-54bb324e6178/image.png)

### ë¬¸ì œ1: ì´ê±´ ì™œ ë„£ì–´ë†¨ì§€?

```tsx
const onChangeHandler = (e: React.ChangeEvent) => {
  if (!(e.target instanceof HTMLInputElement)) return;
  if (!inputRef.current) return;
  // ì´ ë¶€ë¶„ ë•Œë¬¸ì— onChangeHandlerë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸°ê°€ ë„ˆë¬´ ê¹Œë‹¤ë¡œì› ë‹¤.
  // ì—¬ê¸° inputRef.currentê°€ ì—†ìœ¼ë©´ return í•˜ëŠ” ë¶€ë¶„ì„ ì™œ ë„£ì–´ë†¨ëŠ”ì§€
  // ê¸°ì–µì¡°ì°¨ ë‚˜ì§€ ì•Šì•˜ë‹¤.. inputRefëŠ” focus ì²˜ë¦¬í• ë•Œë§Œ ì‚¬ìš©ëœë‹¤.
  // ì•„ë§ˆ ì²˜ìŒì—ëŠ” inputRef.currentì—ì„œ valueë¥¼ ë°›ì•„ì˜¤ë ¤ê³  í–ˆë‹¤ê°€ ì•ˆì§€ìš´ ê²ƒ ê°™ì•˜ë‹¤. (ë¦¬ë Œë”ë§ ë¬¸ì œë„ ìƒê°í•´ì„œ)

  // ê·¸ë˜ì„œ ì¼ë‹¨ ì§€ì›Œë´¤ë‹¤. ì•„ë¬´ê³³ì—ì„œë„ ë¬¸ì œê°€ ìƒê¸°ì§€ ì•Šì•˜ë‹¤..! ğŸ˜…
  const currentValue = e.target.value;
  setSearchValue(currentValue);

  if (inputValidator(currentValue)) {
    setIsValid(true);
  } else setIsValid(false);
};
```

### ë¬¸ì œ2: type

ë˜. `onChangeHandler` ë‹¤.

```tsx
// useInput

const onChangeHandler = (e: React.ChangeEvent) => {
  if (!(e.target instanceof HTMLInputElement)) return;
  // ì—¬ê¸° ì´ ë¶€ë¶„ë•Œë¬¸ì—, test í•˜ê¸° í˜ë“¤ì—ˆë‹¤.
  // eventë¥¼ ëª©ìœ¼ë¡œ ë„£ì„ë•Œ ê·¸ëƒ¥ ê°ì²´ë¡œ ë„£ìœ¼ë©´ elementê°€ ì•„ë‹ˆë¼ì„œ
  // í…ŒìŠ¤íŠ¸ê°€ ì•ˆë˜ì—ˆë‹¤.
  const currentValue = e.target.value;
  setSearchValue(currentValue);

  if (inputValidator(currentValue)) {
    setIsValid(true);
  } else setIsValid(false);
};
```

```tsx
// test

it("onChangeHandlerê°€ ì‹¤í–‰ë˜ë©´ searchValue, isValidê°€ ë°”ë€ë‹¤.", () => {
  const { result } = renderHook(() => useInput(mockInputValidator));
  const event = {
    target: { value: "the-value" },
  };
  act(() => {
    result.current.onChangeHandler(event);
    // ì—¬ê¸° ë¹¨ê°„ì¤„ì´ ì”ëœ©ë‚˜ì˜¤ë©° ì›í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ê°€ ì•ˆë˜ì—ˆë‹¤.
  });
  expect(result.current.searchValue).toBe("the-value");
});
```

ë‚´ê°€ `mock`ìœ¼ë¡œ ë„£ì–´ë‘” `event` ê°ì²´ëŠ” ë‹¹ì—°íˆ ì‹¤ì œ `element`ì—ì„œ ë‚˜ì˜¨ ê²Œ ì•„ë‹ˆë‹¤. ê·¸ëŸ°ë°, `onChangeHandler`ì—ì„œëŠ” ` if (!(e.target instanceof HTMLInputElement)) return;` ë¬¸ì—ì„œ ë°”ë¡œ ê·¸ëƒ¥ ë¦¬í„´ì„ ì‹œì¼œë²„ë¦¬ë‹ˆ ì˜ë„í•œ ë°ë¡œ í…ŒìŠ¤íŠ¸ê°€ ì•ˆë˜ì—ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í–ˆë‹¤.

```tsx
const onChangeHandler = (e: React.ChangeEvent<HTMLInputElement>) => {
  const currentValue = e.target.value;
  setSearchValue(currentValue);

  if (inputValidator(currentValue)) {
    setIsValid(true);
  } else setIsValid(false);
};
```

êµ³ì´, `return` ì‹œí‚¤ì§€ ì•Šê³  íƒ€ì…ì§€ì •ì„ ìœ„ì²˜ëŸ¼ ë°”ê¿”ì£¼ì—ˆê³ , í…ŒìŠ¤íŠ¸ê°€ ì˜ ë˜ì—ˆë‹¤.
ì•„ë‹ˆë©´, eventê°ì²´ ëª©ì„ ì˜ ë§Œë“¤ì–´ì£¼ê³  `as HtmLINPUTELEMENT`ë¡œ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ë²•ë„ ìˆì„ ê²ƒ ê°™ë‹¤.

### ë¬¸ì œ3: ë¶„ë¦¬í•˜ëŠ” ê²Œ ë‚¬ì§€ ì•Šë‚˜? ë²”ìš©ì„±ì´ ë„ˆë¬´ ì—†ì§€ ì•Šë‚˜?

ìœ„ì˜ `useInput`ì—ì„œ `onFocus, onBlur` ë¥¼ ê°™ì´ ë‹´ê³  ìˆëŠ” ì´ìœ ëŠ” ëŒ€ë¶€ë¶„ì˜ `input`ì—ì„œ ì‚¬ìš©í•  ê²ƒì´ë¼ê³  ìƒê°í–ˆê¸° ë•Œë¬¸ì´ë‹¤. ì‚¬ì‹¤, í…ŒìŠ¤íŠ¸ í• ë•ŒëŠ” ì•ˆë˜ê±°ë‚˜ í•˜ëŠ” ë¬¸ì œëŠ” ì—†ì—ˆë‹¤. ê·¸ëŸ°ë° ë³´ë‹¤ ë³´ë‹ˆê¹Œ ë¶„ë¦¬í•´ì„œ ì‚¬ìš©í•´ë„ ë  ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤. ê·¸ëƒ¥ `useFocus` ë“±ìœ¼ë¡œ í•˜ë‚˜ ë¹¼ì„œ ì‚¬ìš©í•˜ë©´ ë” ê´œì°®ì§€ ì•Šì„ê¹Œ? `input`ì„ ì‚¬ìš©í• ë•Œ ë¬´ì¡°ê±´ `focus, blur`ë¥¼ ì´ìš©í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ì´ ì—†ì„ ìˆ˜ë„ ìˆëŠ”ë°..!

ê·¸ë¦¬ê³  ë²”ìš©ì„±ì´ ë„ˆë¬´ ì—†ì—ˆë‹¤. ì§€ê¸ˆ ë§Œë“  ì´ `useInput` ì€ ë¬´ì¡°ê±´ type = text, password, search ì—ì„œë§Œ ì ìš©ë  ìˆ˜ ìˆì—ˆë‹¤. ê·¸ëŸ¬ë©´ ì´ë¦„ë„ ë°”ê¿”ì£¼ëŠ” ê²Œ ë‚˜ì„ ê²ƒì´ë¼ê³  ìƒê°í–ˆë‹¤. ì´ë¦„ì„ ë°”ê¿€ê±°ë¼ë©´ `useTextInput` ìœ¼ë¡œ í•´ì•¼ê² ë‹¤. ì•„ë‹ˆë©´ ì¡°ê¸ˆ ê³ ì³ì„œ ì ì–´ë„ `checkbox, radio` ê¹Œì§€ëŠ” ì ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ì•¼ í•œë‹¤ê³  ìƒê°í–ˆë‹¤.

## ë¬¸ì œ í•´ê²°í•˜ê¸°

ë¬¸ì œ 1ì€ ê¸ˆë°© ëë‚¬ê³  (ì§€ì›Œë²„ë¦¬ë©´ ë˜ë‹ˆê¹Œ) ë¬¸ì œ 2ë²ˆê³¼ 3ë²ˆì— ëŒ€í•´ ê³ ë¯¼í•´ì„œ ê²°ê³¼ì ìœ¼ë¡œëŠ” `useInput`ì„ `text`ì—ë§Œ í•œì •ì§“ê²Œ ë§Œë“¤ê³  `useFocus`ëŠ” ë”°ë¡œ ëºë‹¤. ì´ë ‡ê²Œ ìƒê°í•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ì•˜ë‹¤.

- useCheckbox, useRadioBtn ë“±ì„ ë”°ë¡œ ë§Œë“œëŠ”ê²Œ ë” ì ì ˆí•  ê²ƒ ê°™ì•˜ë‹¤.
  ì´ë²ˆ, ì»¤ìŠ¤í…€í›…ì€ `validator`ì„ í•„ìˆ˜ì ìœ¼ë¡œ ë°›ì•„ì•¼ í•˜ë„ë¡ ë§Œë“¤ì–´ë†¨ê³  ì´ëŸ¬í•œ ë¶€ë¶„ì„ ë¶„ê¸°ì²˜ë¦¬ í•  ìˆ˜ëŠ” ìˆì§€ë§Œ ì½”ë“œê°€ ë„ˆë¬´ ë³´ê¸° í˜ë“¤ì–´ì§ˆ ê²ƒ ê°™ì•˜ë‹¤. (ì—†ìœ¼ë©´ ë­ t/fë¥¼ ë°”ê¾¼ë‹¤ë˜ì§€..)
- ëª¨ë“  `input`ì´ `focus`ë¥¼ í•„ìš”ë¡œ í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.
  `focus`ë¥¼ ë„£ì—ˆë˜ ì´ìœ ëŠ” í˜ì´ì§€ê°€ ë¡œë“œ ë˜ì—ˆì„ë•Œ ë°”ë¡œ focusë˜ë„ë¡ í•˜ê³  ì‹¶ì—ˆê³ ,
  ì´ focusì˜ ì—¬ë¶€ì— ë”°ë¼ì„œ ê²½ê³  ë©”ì„¸ì§€ì˜ ì¶œë ¥ì´ ì—¬ë¶€ê°€ ë‹¬ë¼ì¡Œê¸° ë•Œë¬¸ì´ë‹¤.
  ê·¸ëŸ°ë°, ëª¨ë“  inputì´ ì´ë¥¼ í•„ìš”ë¡œ í•˜ì§€ ì•Šì„ ê²ƒ ê°™ë‹¤ê³  ìƒê°í–ˆë‹¤.

### useTextInput

```tsx
import { useState } from "react";

const UseTextInput = (inputValidator: (value: string) => boolean) => {
  const [searchValue, setSearchValue] = useState("");
  const [isValid, setIsValid] = useState(false);

  const onChangeHandler = (e: React.ChangeEvent<HTMLInputElement>) => {
    const currentValue = e.target.value;
    setSearchValue(currentValue);

    if (inputValidator(currentValue)) {
      setIsValid(true);
    } else setIsValid(false);
  };

  return {
    onChangeHandler,
    isValid,
    searchValue,
  };
};

export default UseTextInput;
```

ì´ë ‡ê²Œ, ì»¤ìŠ¤í…€í›…ì„ ì¡°ê¸ˆ ë¶„ë¦¬í•´ì„œ `input`ë§Œì„ ë‹¤ë£¨ê³ ë¡ ë³€ê²½í–ˆë‹¤.

```tsx
import { renderHook } from "@testing-library/react";
import useTextInput from "hooks/useTextInput";
import { act } from "react-dom/test-utils";

const mockInputValidator = (value: string) => {
  return value.length > 1;
};
const setUp = () => {
  const { result } = renderHook(() => useTextInput(mockInputValidator));
  return result;
};

describe("useTextInput", () => {
  it("onChangeHandler í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤.", () => {
    const result = setUp();
    const { onChangeHandler } = result.current;

    expect(onChangeHandler).toBeInstanceOf(Function);
  });

  it("searchInputì˜ ì´ˆê¹ƒê°’ì€ ''ì´ê³ , isValidì˜ ì´ˆê¹ƒê°’ì€ falseì´ë‹¤.", () => {
    const result = setUp();
    const { searchValue, isValid } = result.current;

    expect(searchValue).toBe("");
    expect(isValid).toBe(false);
  });

  it("event.target.value ë”°ë¼ onChangeHandlerê°€ ì‹¤í–‰ë˜ê³ , searchInput, isValidê°€ ë°”ë€ë‹¤.", () => {
    const result = setUp();
    const event = {
      target: { value: "the-value" },
    };

    act(() => {
      result.current.onChangeHandler(event);
    });

    // todo event ê°ì²´ ëª© ë§Œë“¤ê¸° ë‹¤ìŒì— í•˜ë ¤ê³  í•œë‹¤..!
    expect(result.current.searchValue).toBe("the-value");
    expect(result.current.isValid).toBe(mockInputValidator("the-value"));
  });
});
```

### useFocus

```tsx
import { useState, useRef, useEffect } from "react";

const useFocus = () => {
  const [isFocus, setIsFocus] = useState(false);
  const inputRef = useRef<HTMLInputElement>(null);

  useEffect(() => {
    if (!inputRef.current) return;
    inputRef.current.focus();
  }, []);

  const onBlurHandler = () => setIsFocus(false);
  const onFocusHandler = () => setIsFocus(true);

  return {
    onFocusHandler,
    onBlurHandler,
    inputRef,
    isFocus,
  };
};

export default useFocus;
```

ì½”ë“œë¥¼ ì´ëŸ°ì‹ìœ¼ë¡œ ë°”ê¿”ì£¼ì—ˆê³ , test ì½”ë“œëŠ” ì•„ë˜ì²˜ëŸ¼ ì‘ì„±í–ˆë‹¤.

```tsx
import { renderHook } from "@testing-library/react";
import useFocus from "hooks/useFocus";
import { act } from "react-dom/test-utils";

describe("useFocus", () => {
  it("isFocus, onFocusHandler, onBlurHandler, inputRefë¥¼ ë°˜í™˜í•œë‹¤. isFocusì˜ ì´ˆê¹ƒê°’ì€ falseì´ê³ , inputRef.current === null ì´ë‹¤.", () => {
    const { result } = renderHook(() => useFocus());

    const { inputRef, isFocus, onFocusHandler, onBlurHandler } = result.current;

    expect(isFocus).toBe(false);
    expect(inputRef).toStrictEqual({ current: null });
    // ê°ì²´ ë¹„êµí• ë•Œ toSTrictEqual
    expect(onFocusHandler).toBeInstanceOf(Function);
    expect(onBlurHandler).toBeInstanceOf(Function);
  });

  it("onFocusHandlerê°€ ì‹¤í–‰ë˜ë©´, isFocusëŠ” trueê°€ ëœë‹¤.", () => {
    const { result } = renderHook(() => useFocus());

    act(() => {
      result.current.onFocusHandler();
    });

    expect(result.current.isFocus).toBe(true);
  });

  it("onBlurHandlerê°€ ì‹¤í–‰ë˜ë©´, isFocusëŠ” falseê°€ ëœë‹¤.", () => {
    const { result } = renderHook(() => useFocus());

    act(() => {
      result.current.onFocusHandler();
    });

    expect(result.current.isFocus).toBe(true);

    act(() => {
      result.current.onBlurHandler();
    });

    expect(result.current.isFocus).toBe(false);
  });
  // it("mountë˜ì—ˆì„ë•Œ inputRef.currentê°€ ìˆë‹¤ë©´ focus() í•œë‹¤.", () => {
  //   const { result, rerender } = renderHook(() => useFocus());
  //   rerender();
  // // useEffect + ref ì‚¬ìš©í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì²˜ë¦¬ ì–´ë–»ê²Œ í• ì§€ ê³ ë¯¼ì¤‘..
  // });
});
```

í•˜ë‚˜, ë¬¸ì œê°€ ë” ë°œìƒí–ˆë‹¤ëŠ”ë° `useEffect + useRef` ì˜ ì¡°í•©ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì´ì—ˆë‹¤. ì•„ì§ ì•Œì•„ë³´ì§€ ëª»í•´ì„œ, ì•Œê²Œë˜ë©´ ê³µë¶€í•´ë³´ê³  ê¸€ì„ í•˜ë‚˜ ë” ì ê¸°ë¡œ ë§ˆìŒì„ ë¨¹ì—ˆë‹¤.

## ë§ˆë¬´ë¦¬

í…ŒìŠ¤íŠ¸ ì½”ë“œ ì“°ëŠ”ê±° ì¬ë¯¸ ìˆëŠ”ë°, í˜ë“¤ë‹¤. ë°©ë²•ì´ ë„ˆë¬´ ë‹¤ì–‘í•˜ê³  ë‚´ ë°©ë²•ì´ ë§ëŠ”ì§€ì— ëŒ€í•œ í™•ì‹ ì€ ìƒê¸°ì§€ ì•ŠëŠ”ë‹¤. ì•„ì§ ì˜ ëª°ë¼ì„œ ê·¸ëŸ¬ëŠ” ê²ƒ ê°™ë‹¤. ê·¸ëŸ°ë°, í…ŒìŠ¤íŠ¸ì½”ë“œ ì‘ì„±í•˜ë‹¤ê°€ ë­”ê°€ ë§ˆìŒì—ì•ˆë“œëŠ” ì ì„ ë°œê²¬í•œê±´ ì¬ë¯¸ìˆì—ˆë‹¤. ì‚¬ì‹¤ ë‚´ ìˆ˜ì¤€ì—ì„œ í…ŒìŠ¤íŠ¸ì½”ë“œë¥¼ í•œë°©ì— ì“°ê¸°ê°€ í˜ë“¤ì–´ë³´ì—¬ ë‚˜ëˆˆ ì´ìœ ê°€ ì‚¬ì‹¤ í¬ê¸´ í–ˆë‹¤.. ì´ê²ƒì €ê²ƒ ì„ì—¬ì ¸ ìˆëŠ” í›…ì„ í…ŒìŠ¤íŠ¸ í•  ìˆœ ì—†ì„ ê²ƒ ê°™ì•˜ë‹¤. ê²°ê³¼ì ìœ¼ë¡  ì˜ ë‚˜ëˆˆ ê²ƒ ê°™ìœ¼ë‹ˆ ğŸ˜‚

## ref

https://www.rumblefish.dev/blog/post/how-to-test-custom-react-hooks/
https://ui.toast.com/posts/ko_20220311
